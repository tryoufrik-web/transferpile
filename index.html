<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì¶ WebFolder ‚Ä¢ File Transfer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #0b0e14;
            color: #edf2f7;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        
        .container {
            max-width: 1100px;
            width: 100%;
        }
        
        /* HEADER */
        .hero {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .hero h1 {
            font-size: 3.2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, #a0e7ff, #7aa2f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
        }
        
        .hero p {
            font-size: 1.2rem;
            color: #a0aec0;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* DUAL PANEL */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 28px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 720px) {
            .grid { grid-template-columns: 1fr; }
        }
        
        /* CARD */
        .card {
            background: #14181f;
            border-radius: 32px;
            padding: 28px;
            border: 1px solid #2a2f37;
            box-shadow: 0 20px 35px -8px rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #2d3748;
        }
        
        .card-header i {
            font-size: 1.8rem;
            color: #7aa2f7;
        }
        
        .card-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #e2e8f0;
        }
        
        /* FOLDER SECTION */
        .folder-section {
            background: #0f131a;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 28px;
            border: 1px dashed #4a5568;
        }
        
        .folder-label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #cbd5e0;
            font-size: 0.95rem;
            margin-bottom: 12px;
        }
        
        .link-box {
            background: #0a0d12;
            border-radius: 14px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid #2d3748;
            margin-bottom: 16px;
        }
        
        .link-box input {
            flex: 1;
            background: transparent;
            border: none;
            color: #a0e7ff;
            font-family: 'SF Mono', 'Fira Code', monospace;
            font-size: 0.95rem;
            padding: 4px 0;
            outline: none;
        }
        
        .qr-placeholder {
            background: #1e242c;
            border-radius: 10px;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #a0aec0;
            font-size: 0.9rem;
        }
        
        .badge {
            background: #2d3748;
            border-radius: 30px;
            padding: 6px 14px;
            font-size: 0.8rem;
            color: #cbd5e0;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .badge i {
            color: #7aa2f7;
        }
        
        /* UPLOAD AREA */
        .upload-zone {
            border: 2px dashed #4a5568;
            border-radius: 20px;
            padding: 36px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: #0f131a;
            margin-bottom: 20px;
        }
        
        .upload-zone:hover {
            border-color: #7aa2f7;
            background: rgba(122, 162, 247, 0.05);
        }
        
        .upload-zone i {
            font-size: 2.8rem;
            color: #7aa2f7;
            margin-bottom: 12px;
        }
        
        .upload-zone h3 {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 6px;
        }
        
        .upload-zone p {
            color: #a0aec0;
            font-size: 0.9rem;
        }
        
        .file-hint {
            margin-top: 12px;
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .file-hint span {
            background: #1e242c;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 0.8rem;
            color: #cbd5e0;
        }
        
        /* FILE LIST */
        .file-list {
            margin-top: 16px;
            max-height: 280px;
            overflow-y: auto;
            padding-right: 4px;
        }
        
        .file-item {
            background: #1a1e26;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 4px solid #7aa2f7;
            transition: 0.1s;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 16px;
            flex: 1;
            min-width: 0;
        }
        
        .file-icon {
            font-size: 1.8rem;
        }
        
        .file-details {
            flex: 1;
            min-width: 0;
        }
        
        .file-name {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 4px;
        }
        
        .file-meta {
            display: flex;
            gap: 16px;
            font-size: 0.8rem;
            color: #a0aec0;
        }
        
        .file-status {
            font-size: 0.8rem;
            color: #7aa2f7;
        }
        
        /* BUTTON */
        .btn {
            background: #7aa2f7;
            color: #0b0e14;
            border: none;
            padding: 14px 24px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }
        
        .btn:hover {
            background: #8ab4f8;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(122, 162, 247, 0.25);
        }
        
        .btn-outline {
            background: transparent;
            border: 1.5px solid #4a5568;
            color: #e2e8f0;
        }
        
        .btn-outline:hover {
            background: #1e242c;
            border-color: #7aa2f7;
            transform: none;
            box-shadow: none;
        }
        
        .btn:disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        
        /* RECEIVE SECTION */
        .incoming-area {
            background: #0f131a;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .empty-inbox {
            text-align: center;
            padding: 40px 20px;
            color: #718096;
        }
        
        .empty-inbox i {
            font-size: 2.5rem;
            margin-bottom: 12px;
            color: #4a5568;
        }
        
        /* FOOTER */
        .footer-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0 0;
            color: #718096;
            font-size: 0.85rem;
            border-top: 1px solid #2d3748;
            margin-top: 20px;
        }
        
        .encryption-badge {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* LOGS */
        .logs-panel {
            background: #0a0d12;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #2d3748;
        }
        
        .logs-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: #a0aec0;
            font-size: 0.9rem;
        }
        
        .log-stream {
            font-family: 'SF Mono', monospace;
            font-size: 0.85rem;
            color: #a0aec0;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 6px 0;
            border-bottom: 1px solid #1e242c;
            display: flex;
            gap: 12px;
        }
        
        .log-time {
            color: #7aa2f7;
        }
        
        /* UTILS */
        .hidden { display: none; }
        .text-accent { color: #a0e7ff; }
        .mt-4 { margin-top: 16px; }
        .mt-3 { margin-top: 12px; }
        .gap-2 { gap: 8px; }
        .flex { display: flex; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- HERO -->
        <div class="hero">
            <h1>üìÅ webfolder</h1>
            <p>Buat folder web ‚Ä¢ kirim file tanpa batas ‚Ä¢ real‚Äëtime ‚Ä¢ pure local</p>
        </div>
        
        <!-- GRID: SEND + RECEIVE -->
        <div class="grid">
            <!-- ========== PANEL KIRI: SENDER ========== -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-folder-open"></i>
                    <h2>WebFolder Saya</h2>
                </div>
                
                <!-- FOLDER INFO -->
                <div class="folder-section">
                    <div class="folder-label">
                        <i class="fas fa-link" style="color: #7aa2f7;"></i>
                        <span>Alamat folder unik (copy & share)</span>
                    </div>
                    <div class="link-box">
                        <i class="fas fa-lock" style="color: #a0e7ff; opacity: 0.7;"></i>
                        <input type="text" id="folderLink" value="https://webfolder.local/7f3a1d#K8x2pL9q" readonly>
                        <button class="qr-placeholder" onclick="copyFolderLink()">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <span class="badge"><i class="fas fa-infinity"></i> No size limit</span>
                        <span class="badge"><i class="fas fa-clock"></i> Auto‚Äëdestroy 90h</span>
                        <span class="badge"><i class="fas fa-shield"></i> AES‚Äë128 (simulasi)</span>
                    </div>
                </div>
                
                <!-- UPLOAD ZONE (FILENYA HARUS MUNCUL) -->
                <div class="upload-zone" id="dropZoneSender">
                    <input type="file" id="fileInputSender" multiple style="display: none;">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Taruh file di sini</h3>
                    <p>atau klik untuk memilih</p>
                    <div class="file-hint">
                        <span><i class="far fa-image"></i> Gambar</span>
                        <span><i class="far fa-file-video"></i> Video</span>
                        <span><i class="far fa-file-archive"></i> Arsip</span>
                        <span><i class="far fa-file-pdf"></i> PDF</span>
                    </div>
                </div>
                
                <!-- LIST FILE YANG DIPILIH (HARUS MUNCUL) -->
                <div id="senderFileListContainer">
                    <!-- isi dari javascript -->
                </div>
                
                <div style="display: flex; gap: 12px; margin-top: 8px;">
                    <button class="btn" id="sendBtn" disabled>
                        <i class="fas fa-paper-plane"></i> Kirim Sekarang
                    </button>
                    <button class="btn-outline" onclick="clearAllSenderFiles()" style="width: auto;">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
                
                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #2d3748;">
                    <div style="display: flex; justify-content: space-between; color: #a0aec0; font-size: 0.9rem;">
                        <span><i class="fas fa-bolt"></i> Real‚Äëtime: link aktif saat pilih file</span>
                        <span><i class="fas fa-redo-alt"></i> Resume ready</span>
                    </div>
                </div>
            </div>
            
            <!-- ========== PANEL KANAN: RECEIVER ========== -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-inbox"></i>
                    <h2>File Masuk</h2>
                </div>
                
                <!-- INSTRUKSI (ala filekiwi: "letakkan file di sini") [citation:6] -->
                <div style="background: #0f131a; border-radius: 20px; padding: 20px; margin-bottom: 24px;">
                    <div style="display: flex; gap: 16px; align-items: center;">
                        <i class="fas fa-hand-pointer" style="font-size: 2rem; color: #7aa2f7;"></i>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Butuh kirim file ke orang lain?</div>
                            <div style="color: #a0aec0; font-size: 0.9rem;">Cukup kirim link folder. Mereka upload di sini, langsung muncul ke kamu.</div>
                        </div>
                    </div>
                </div>
                
                <!-- INCOMING FILES DARI SENDER / DARI ORANG LAIN -->
                <div class="incoming-area" style="background: #0a0d12;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 16px;">
                        <span style="font-weight: 600;"><i class="fas fa-download"></i> File diterima</span>
                        <span class="badge" id="incomingCountBadge">0 file</span>
                    </div>
                    
                    <div id="receiverFileListContainer">
                        <!-- file yang diterima akan muncul di sini -->
                    </div>
                    
                    <button class="btn-outline" id="downloadAllBtn" disabled style="margin-top: 20px; width: 100%;" onclick="downloadAllFiles()">
                        <i class="fas fa-file-export"></i> Download semua
                    </button>
                </div>
                
                <!-- QR CODE SIMULASI (filekiwi punya QR) [citation:10] -->
                <div style="display: flex; align-items: center; gap: 16px; margin-top: 20px; padding: 12px; background: #0f131a; border-radius: 16px;">
                    <div style="background: white; border-radius: 12px; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; color: black; font-size: 1.8rem;">
                        <i class="fas fa-qrcode"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 500; font-size: 0.95rem;">QR Code folder</div>
                        <div style="color: #a0aec0; font-size: 0.8rem;">Scan untuk buka link di HP</div>
                    </div>
                    <button class="badge" onclick="alert('QR: ' + document.getElementById('folderLink').value)">Tampilkan</button>
                </div>
            </div>
        </div>
        
        <!-- LOG ACTIVITY -->
        <div class="logs-panel">
            <div class="logs-header">
                <i class="fas fa-shield-alt" style="color: #7aa2f7;"></i>
                <span>End‚Äëto‚Äëend encryption ‚Ä¢ semua diproses di browser</span>
                <span style="margin-left: auto; font-size: 0.8rem;">üîí 128-bit AES-GCM (simulasi)</span>
            </div>
            <div class="log-stream" id="logStream">
                <div class="log-entry"><span class="log-time">[Sistem]</span> WebFolder siap. Link unik telah dibuat.</div>
                <div class="log-entry"><span class="log-time">[Sistem]</span> Tidak ada batasan ukuran, semua file diproses lokal.</div>
            </div>
        </div>
        
        <!-- FOOTER -->
        <div class="footer-info">
            <div class="encryption-badge">
                <i class="fas fa-lock"></i> 
                <span>dienkripsi di browser ‚Ä¢ server tidak tahu isi</span>
            </div>
            <div>
                <i class="fas fa-clock"></i> auto-destroy: <span id="destroyTimer">89:59:32</span>
            </div>
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            // -------------------- STATE --------------------
            // File yg dipilih di panel kiri (sender)
            let selectedFiles = [];
            
            // File yg "dikirim" / diterima di panel kanan (receiver)
            let receivedFiles = [];

            // ID folder unik (simulasi)
            const FOLDER_ID = generateFolderId();
            const FOLDER_KEY = generateEncKey();
            
            // DOM Elements
            const dropZone = document.getElementById('dropZoneSender');
            const fileInput = document.getElementById('fileInputSender');
            const senderFileListContainer = document.getElementById('senderFileListContainer');
            const receiverFileListContainer = document.getElementById('receiverFileListContainer');
            const sendBtn = document.getElementById('sendBtn');
            const downloadAllBtn = document.getElementById('downloadAllBtn');
            const folderLinkInput = document.getElementById('folderLink');
            const incomingCountBadge = document.getElementById('incomingCountBadge');
            const logStream = document.getElementById('logStream');
            const destroyTimer = document.getElementById('destroyTimer');

            // Generate link folder (filekiwi style: # untuk key) [citation:8]
            function generateFolderId() {
                return Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 6);
            }
            function generateEncKey() {
                return Math.random().toString(36).substring(2, 12) + Math.random().toString(36).substring(2, 8);
            }
            
            // Set link folder
            function updateFolderLink() {
                folderLinkInput.value = `https://webfolder.local/${FOLDER_ID}#${FOLDER_KEY}`;
            }
            updateFolderLink();

            // -------------------- UI: SENDER FILE LIST (FILE HARUS MUNCUL) --------------------
            function renderSenderFileList() {
                if (!senderFileListContainer) return;
                
                if (selectedFiles.length === 0) {
                    senderFileListContainer.innerHTML = `
                        <div style="background: #0f131a; border-radius: 16px; padding: 24px; text-align: center; margin-top: 8px; color: #718096;">
                            <i class="fas fa-folder-open" style="font-size: 2rem; margin-bottom: 8px; opacity: 0.6;"></i>
                            <p style="font-size: 0.95rem;">Belum ada file dipilih</p>
                            <p style="font-size: 0.8rem;">Klik atau drag file ke area upload</p>
                        </div>
                    `;
                    sendBtn.disabled = true;
                    return;
                }
                
                sendBtn.disabled = false;
                
                let html = `<div class="file-list" style="margin-top: 12px;">`;
                selectedFiles.forEach((file, index) => {
                    const icon = getFileIcon(file.type);
                    const size = formatBytes(file.size);
                    html += `
                        <div class="file-item">
                            <div class="file-info">
                                <span class="file-icon">${icon}</span>
                                <div class="file-details">
                                    <div class="file-name">${escapeHTML(file.name)}</div>
                                    <div class="file-meta">
                                        <span>${size}</span>
                                        <span style="color: #7aa2f7;"><i class="fas fa-lock"></i> encrypt</span>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <span class="file-status"><i class="fas fa-check-circle"></i> siap</span>
                                <i class="fas fa-times" style="cursor: pointer; color: #f87171; font-size: 1.1rem;" onclick="removeSenderFile(${index})"></i>
                            </div>
                        </div>
                    `;
                });
                html += `</div>`;
                senderFileListContainer.innerHTML = html;
                
                // Log aktivitas
                addLog(`üì¶ ${selectedFiles.length} file siap dikirim`, 'info');
            }

            // -------------------- HANDLE UPLOAD (FILE WAJIB MUNCUL) --------------------
            function handleSenderFiles(fileList) {
                if (!fileList || fileList.length === 0) return;
                
                const filesArray = Array.from(fileList);
                
                // Filter duplikat (berdasarkan nama + size)
                const newFiles = filesArray.filter(newFile => 
                    !selectedFiles.some(ex => ex.name === newFile.name && ex.size === newFile.size)
                );
                
                if (newFiles.length === 0) {
                    addLog('‚ö†Ô∏è File sudah ada di daftar', 'warn');
                    return;
                }
                
                selectedFiles = [...selectedFiles, ...newFiles];
                renderSenderFileList();
                
                // FILEKIWI STYLE: real-time, link langsung aktif tanpa nunggu upload [citation:1][citation:5]
                addLog(`‚úÖ +${newFiles.length} file ditambahkan. Link siap dibagikan.`, 'success');
            }

            // -------------------- REMOVE FILE --------------------
            window.removeSenderFile = function(index) {
                if (index >= 0 && index < selectedFiles.length) {
                    const removed = selectedFiles[index].name;
                    selectedFiles.splice(index, 1);
                    renderSenderFileList();
                    addLog(`üóëÔ∏è Hapus: ${removed}`, 'info');
                }
            };

            window.clearAllSenderFiles = function() {
                selectedFiles = [];
                renderSenderFileList();
                addLog('üßπ Semua file dihapus dari antrian', 'info');
            };

            // -------------------- SEND FILES (PANEL KIRI -> PANEL KANAN) --------------------
            window.sendFiles = function() {
                if (selectedFiles.length === 0) {
                    alert('Tidak ada file yang dipilih');
                    return;
                }

                addLog(`üì§ Mengirim ${selectedFiles.length} file ke folder...`, 'info');
                
                // Simulasi real-time: langsung masuk ke received
                selectedFiles.forEach((file, idx) => {
                    setTimeout(() => {
                        // Buat salinan file object (simulasi)
                        const fileObj = {
                            name: file.name,
                            size: file.size,
                            type: file.type,
                            id: Date.now() + idx + Math.random(),
                            transferredAt: new Date().toLocaleTimeString()
                        };
                        receivedFiles.push(fileObj);
                        renderReceiverFileList();
                        
                        // Log tiap file
                        addLog(`‚ú® File masuk: ${file.name} (${formatBytes(file.size)})`, 'success');
                    }, idx * 150); // real-time bertahap
                });

                // Kosongkan sender setelah terkirim
                setTimeout(() => {
                    selectedFiles = [];
                    renderSenderFileList();
                    addLog('üéâ Semua file terkirim!', 'success');
                }, selectedFiles.length * 150 + 300);
            };
            sendBtn.onclick = window.sendFiles;

            // -------------------- RECEIVER: LIST FILE DITERIMA --------------------
            function renderReceiverFileList() {
                if (!receiverFileListContainer) return;
                
                if (receivedFiles.length === 0) {
                    receiverFileListContainer.innerHTML = `
                        <div class="empty-inbox">
                            <i class="fas fa-inbox"></i>
                            <p style="margin-bottom: 4px;">Belum ada file diterima</p>
                            <p style="font-size: 0.8rem;">File yang dikirim akan muncul di sini secara real‚Äëtime</p>
                        </div>
                    `;
                    downloadAllBtn.disabled = true;
                    incomingCountBadge.innerText = '0 file';
                    return;
                }
                
                downloadAllBtn.disabled = false;
                incomingCountBadge.innerText = `${receivedFiles.length} file`;
                
                let html = `<div class="file-list" style="max-height: 280px;">`;
                receivedFiles.forEach((file, idx) => {
                    const icon = getFileIcon(file.type);
                    const size = formatBytes(file.size);
                    html += `
                        <div class="file-item" style="border-left-color: #48bb78;">
                            <div class="file-info">
                                <span class="file-icon">${icon}</span>
                                <div class="file-details">
                                    <div class="file-name">${escapeHTML(file.name)}</div>
                                    <div class="file-meta">
                                        <span>${size}</span>
                                        <span style="color: #a0e7ff;"><i class="fas fa-lock-open"></i> decrypt</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <i class="fas fa-download" style="cursor: pointer; color: #7aa2f7; font-size: 1.2rem;" onclick="downloadSingleFile(${idx})"></i>
                            </div>
                        </div>
                    `;
                });
                html += `</div>`;
                receiverFileListContainer.innerHTML = html;
            }

            // -------------------- DOWNLOAD --------------------
            window.downloadSingleFile = function(index) {
                if (index >= 0 && index < receivedFiles.length) {
                    const file = receivedFiles[index];
                    // Buat file dummy (karena tidak ada file asli tanpa server)
                    const blob = new Blob([`File: ${file.name}\nSize: ${file.size}\nDiterima via WebFolder (simulasi).\nFile ini dibuat secara lokal, tidak diupload ke server.`], 
                                        { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = file.name;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    addLog(`‚¨áÔ∏è Download: ${file.name}`, 'info');
                }
            };

            window.downloadAllFiles = function() {
                receivedFiles.forEach((_, idx) => {
                    setTimeout(() => {
                        window.downloadSingleFile(idx);
                    }, idx * 200);
                });
                addLog(`üì• Download semua (${receivedFiles.length} file)`, 'info');
            };

            // -------------------- EVENT LISTENERS (UPLOAD WAJIB WORK) --------------------
            function setupEventListeners() {
                // 1. Klik zona upload -> trigger file input
                dropZone.addEventListener('click', function(e) {
                    if (e.target.tagName !== 'INPUT') {
                        fileInput.click();
                    }
                });

                // 2. Drag & drop
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.style.borderColor = '#7aa2f7';
                    dropZone.style.background = 'rgba(122, 162, 247, 0.08)';
                });
                dropZone.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    dropZone.style.borderColor = '#4a5568';
                    dropZone.style.background = '#0f131a';
                });
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.style.borderColor = '#4a5568';
                    dropZone.style.background = '#0f131a';
                    if (e.dataTransfer.files.length > 0) {
                        handleSenderFiles(e.dataTransfer.files);
                    }
                });

                // 3. File input change
                fileInput.addEventListener('change', function(e) {
                    handleSenderFiles(e.target.files);
                    fileInput.value = ''; // biar bisa pilih file yg sama lagi
                });
            }

            // -------------------- UTILS --------------------
            function getFileIcon(mime) {
                if (mime.includes('image')) return 'üñºÔ∏è';
                if (mime.includes('video')) return 'üé¨';
                if (mime.includes('audio')) return 'üéµ';
                if (mime.includes('pdf')) return 'üìÑ';
                if (mime.includes('zip') || mime.includes('rar') || mime.includes('tar')) return 'üì¶';
                if (mime.includes('word') || mime.includes('document')) return 'üìã';
                if (mime.includes('excel') || mime.includes('sheet')) return 'üìä';
                if (mime.includes('powerpoint') || mime.includes('presentation')) return 'üìΩÔ∏è';
                if (mime.includes('text')) return 'üìù';
                return 'üìÅ';
            }

            function formatBytes(bytes) {
                if (bytes === 0) return '0 B';
                const k = 1024;
                const sizes = ['B', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
            }

            function escapeHTML(str) {
                return String(str).replace(/[&<>"]/g, function(c) {
                    if (c === '&') return '&amp;';
                    if (c === '<') return '&lt;';
                    if (c === '>') return '&gt;';
                    if (c === '"') return '&quot;';
                    return c;
                });
            }

            window.copyFolderLink = function() {
                const link = document.getElementById('folderLink');
                link.select();
                navigator.clipboard.writeText(link.value);
                addLog('üîó Link folder dicopy', 'info');
                alert('Link folder dicopy!');
            };

            // LOG SYSTEM
            function addLog(message, type = 'info') {
                const now = new Date();
                const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `<span class="log-time">[${time}]</span> ${message}`;
                logStream.appendChild(entry);
                logStream.scrollTop = logStream.scrollHeight;
                
                // batasi 15 log
                if (logStream.children.length > 15) {
                    logStream.removeChild(logStream.children[0]);
                }
            }

            // TIMER SIMULASI AUTO-DESTROY (90 jam)
            let seconds = 90 * 3600 - 28; // biar gak bulat
            function updateTimer() {
                if (seconds <= 0) {
                    destroyTimer.innerText = '0:00:00';
                    return;
                }
                seconds--;
                const h = Math.floor(seconds / 3600);
                const m = Math.floor((seconds % 3600) / 60);
                const s = seconds % 60;
                destroyTimer.innerText = `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            }
            setInterval(updateTimer, 1000);

            // -------------------- INIT --------------------
            setupEventListeners();
            renderSenderFileList();
            renderReceiverFileList();
            
            // Contoh dummy file supaya user liat
